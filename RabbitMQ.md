## 消息队列
MQ全称为Message Queue 消息队列（MQ）是一种应用程序对应用程序的通信方法。MQ是消费-生产者模型的一个典型的代表，一端往消息队列中不断写入消息，而另一端则可以读取队列中的消息。这样发布者和使用者都不用知道对方的存在。

生产者消费者模式是通过一个容器来解决生产者和消费者的强耦合问题。生产者和消费者彼此之间不直接通讯，而通过阻塞队列来进行通讯，所以生产者生产完数据之后不用等待消费者处理，直接扔给阻塞队列，消费者不找生产者要数据，而是直接从阻塞队列里取，阻塞队列就相当于一个缓冲区，平衡了生产者和消费者的处理能力。

消息队列可以简单理解为：把要传输的数据放在队列中。

### 队列

队列是一种先进先出的数据结构
```python
import queue  # python中的线程队列。进程队列是在另一个库中

q = queue.Queue(maxsize=10)  # 创建一个队列

q.put(111)
q.put(222)
q.put(333)

print(q.get())  # 按顺序取出
print(q.get())
print(q.get())
print(q.get())  # 默认没有数据时阻塞，设置参数block=False就是报错：q.get(block=False)
```

## 为什么要用消息队列
消息队列中间件是分布式系统中重要的组件，主要解决应用解耦，异步消息，流量削锋等问题，实现高性能，高可用，可伸缩和最终一致性架构。目前使用较多的消息队列有ActiveMQ，RabbitMQ，ZeroMQ，Kafka，MetaMQ，RocketMQ。

![说明](img/waimai.png)